pro test_rtu_spectra_approx

;freqs = [3,3.18,3.37,3.57,3.75,4,4.2,4.5,4.7,4.9,5.1,5.3,5.5,5.7,6,6.15,6.3,6.65,6.8,6.95, $
;         7.1,7.3,7.6,7.75,7.9,8.1,8.25,8.4,8.7,8.9,9.05,9.2,9.35,9.5,9.7,10,10.15,10.3,10.5, $
;         10.6,10.9,11.3,11.4,11.6,11.7,11.9,12.2,12.4,12.5,12.7,12.9,13.05,13.35,13.5,13.7,14, $
;         14.15,14.3,14.5,14.6,15,15.3,15.45,15.6,15.75,15.9,16.1,16.25,16.4,16.5,16.9,17.05, $
;         17.2,17.35,17.5,17.7,17.8,18.2]
;         
;fluxes = [946.97,1090.5,1240.6,1351,1513.6,1621,1828.7,2118.3,2214.2,2334.1,2394,2416.2,2280.3, $
;          2293.2,2497.3,2550.3,2858.9,2857.5,2521.5,2526.7,2565.6,2548.6,2533.3,2530.6,2446.4, $
;          2504.1,2409.9,2280.6,2123.3,2064.5,2031.2,2183.9,1970.7,1940.9,1797.2,1822.4,1695.4, $
;          1525.4,1448.2,1416.1,1168.3,1139.7,1091.6,1152.1,988.43,907.36,930.93,870.79,855.39, $
;          784.75,760.28,734.84,659.72,636.75,648.95,589.58,556.71,545.35,509.98,484.13,460.67, $
;          448.67,434.65,413.69,402.97,395.59,380.98,374.75,362.81,430.55,333.55,326.93,318.05, $
;          307.3,293.35,287.93,239.99,269.88]

tbl = read_ascii('s:\University\Work\RATANdataTK\Approx\RATAN_AR12811_SRH_20210322_092028_az0_totalflux__shablon.dat')
freqs = transpose(tbl.field1[0, *], [1, 0])
fluxes = transpose(tbl.field1[5, *], [1, 0])

rc = rtu_spectra_approx(freqs, fluxes, result, dll_location = 's:\Projects\Physics104_291\ProgramD64\agsGeneralRadioEmission.dll')

p = plot(freqs, fluxes)
p2 = plot(freqs, result, '-r1', OVERPLOT = p)

end
